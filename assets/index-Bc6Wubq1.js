import{f as c,j as e,u as W,c as i,s as Y,a as D,o as A,b as C,d as X,m as q,e as J,g as K,h as Q,i as U,r as k,B as V,H as v}from"./index-96uObfCb.js";import{L as Z}from"./LineChart-C4Mk2TLq.js";var T=c(function(s,t){const{htmlWidth:r,htmlHeight:n,alt:l,...o}=s;return e.jsx("img",{width:r,height:n,ref:t,alt:l,...o})});T.displayName="NativeImage";function ee(a,s=[]){const t=Object.assign({},a);for(const r of s)r in t&&delete t[r];return t}var N=c(function(s,t){const{fallbackSrc:r,fallback:n,src:l,srcSet:o,align:h,fit:m,loading:d,ignoreFallback:u,crossOrigin:x,fallbackStrategy:b="beforeLoadOrError",referrerPolicy:S,...y}=s,_=r!==void 0||n!==void 0,F=d!=null||u||!_,$=W({...s,crossOrigin:x,ignoreFallback:F}),B=Y($,b),R={ref:t,objectFit:m,objectPosition:h,...F?y:ee(y,["onError","onLoad"])};return B?n||e.jsx(i.img,{as:T,className:"chakra-image__placeholder",src:r,...R}):e.jsx(i.img,{as:T,src:l,srcSet:o,crossOrigin:x,loading:d,referrerPolicy:S,className:"chakra-image",...R})});N.displayName="Image";var g=c(function(s,t){const r=D("Link",s),{className:n,isExternal:l,...o}=A(s);return e.jsx(i.a,{target:l?"_blank":void 0,rel:l?"noopener":void 0,ref:t,className:C("chakra-link",n),...o,__css:r})});g.displayName="Link";var E=c(function(s,t){const{templateAreas:r,gap:n,rowGap:l,columnGap:o,column:h,row:m,autoFlow:d,autoRows:u,templateRows:x,autoColumns:b,templateColumns:S,...y}=s,_={display:"grid",gridTemplateAreas:r,gridGap:n,gridRowGap:l,gridColumnGap:o,gridAutoColumns:b,gridColumn:h,gridRow:m,gridAutoFlow:d,gridAutoRows:u,gridTemplateRows:x,gridTemplateColumns:S};return e.jsx(i.div,{ref:t,__css:_,...y})});E.displayName="Grid";function z(a){return q(a,s=>s==="auto"?"auto":`span ${s}/span ${s}`)}var I=c(function(s,t){const{area:r,colSpan:n,colStart:l,colEnd:o,rowEnd:h,rowSpan:m,rowStart:d,...u}=s,x=X({gridArea:r,gridColumn:z(n),gridRow:z(m),gridColumnStart:l,gridColumnEnd:o,gridRowStart:d,gridRowEnd:h});return e.jsx(i.div,{ref:t,__css:x,...u})});I.displayName="GridItem";var[se,f]=J({name:"TableStylesContext",errorMessage:`useTableStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Table />" `}),P=c((a,s)=>{const t=K("Table",a),{className:r,layout:n,...l}=A(a);return e.jsx(se,{value:t,children:e.jsx(i.table,{ref:s,__css:{tableLayout:n,...t.table},className:C("chakra-table",r),...l})})});P.displayName="Table";var G=c((a,s)=>{const t=f();return e.jsx(i.thead,{...a,ref:s,__css:t.thead})}),w=c((a,s)=>{const t=f();return e.jsx(i.tr,{...a,ref:s,__css:t.tr})}),O=c((a,s)=>{const{placement:t="bottom",...r}=a,n=f();return e.jsx(i.caption,{...r,ref:s,__css:{...n.caption,captionSide:t}})});O.displayName="TableCaption";var H=c((a,s)=>{var t;const{overflow:r,overflowX:n,className:l,...o}=a;return e.jsx(i.div,{ref:s,className:C("chakra-table__container",l),...o,__css:{display:"block",whiteSpace:"nowrap",WebkitOverflowScrolling:"touch",overflowX:(t=r??n)!=null?t:"auto",overflowY:"hidden",maxWidth:"100%"}})}),M=c((a,s)=>{const t=f();return e.jsx(i.tbody,{...a,ref:s,__css:t.tbody})}),j=c(({isNumeric:a,...s},t)=>{const r=f();return e.jsx(i.td,{...s,ref:t,__css:r.td,"data-is-numeric":a})}),te=c((a,s)=>{const t=f();return e.jsx(i.tfoot,{...a,ref:s,__css:t.tfoot})}),p=c(({isNumeric:a,...s},t)=>{const r=f();return e.jsx(i.th,{...s,ref:t,__css:r.th,"data-is-numeric":a})});const L=({itemType:a,items:s})=>e.jsx(e.Fragment,{children:e.jsx(H,{whiteSpace:"wrap",height:"100vh",overflowY:"auto",children:e.jsxs(P,{variant:"striped",colorScheme:"alternatePurple",children:[e.jsxs(O,{placement:"top",children:["Top ",a]}),e.jsx(G,{children:e.jsxs(w,{children:[e.jsx(p,{fontSize:{base:"16",md:"18"},children:"#"}),e.jsx(p,{fontSize:{base:"16",md:"18"},children:a}),e.jsx(p,{fontSize:{base:"16",md:"18"},children:"Image"})]})}),e.jsx(M,{children:s.map((t,r)=>e.jsxs(w,{h:"10%",w:"100%",children:[e.jsx(j,{fontSize:{base:"16",md:"18"},children:r+1}),e.jsx(j,{fontSize:{base:"16",md:"18"},children:e.jsx(g,{href:t.external_urls.spotify,target:"_blank",children:t.name})}),e.jsx(j,{children:e.jsx(N,{src:a==="Artists"?t.images[0].url:t.album.images[0].url,boxSize:{base:"40px",md:"60px"},fallbackSrc:"https://via.placeholder.com/150"})})]},`recently played ${t.name,r}`))}),e.jsx(te,{children:e.jsxs(w,{children:[e.jsx(p,{fontSize:{base:"16",md:"18"},children:"#"}),e.jsx(p,{fontSize:{base:"16",md:"18"},children:a}),e.jsx(p,{fontSize:{base:"16",md:"18"},children:"Image"})]})})]})})}),ae=({recentlyPlayedSongs:a})=>e.jsx(e.Fragment,{children:e.jsx(H,{whiteSpace:"wrap",height:"100vh",overflowY:"auto",children:e.jsxs(P,{variant:"striped",colorScheme:"alternatePurple",children:[e.jsx(G,{children:e.jsxs(w,{children:[e.jsx(p,{fontSize:{base:"16",md:"18"},children:"#"}),e.jsx(p,{fontSize:{base:"16",md:"18"},children:"Track"}),e.jsx(p,{fontSize:{base:"16",md:"18"},children:"Artist"}),e.jsx(p,{fontSize:{base:"16",md:"18"}})]})}),e.jsx(M,{children:a.map((s,t)=>{var n,l,o,h,m,d,u;const r=new Date(s.played_at).toLocaleString();return e.jsxs(w,{h:"10%",w:"100%",children:[e.jsx(j,{fontSize:{base:"16",md:"18"},children:r}),e.jsx(j,{fontSize:{base:"16",md:"18"},children:e.jsx(g,{href:(n=s.external_urls)==null?void 0:n.spotify,target:"_blank",children:s.name})}),e.jsx(j,{fontSize:{base:"16",md:"18"},children:e.jsx(g,{href:(o=(l=s.artists[0])==null?void 0:l.external_urls)==null?void 0:o.spotify,target:"_blank",children:(h=s.artists[0])==null?void 0:h.name})}),e.jsx(j,{children:e.jsx(g,{href:(m=s.album.external_urls)==null?void 0:m.spotify,target:"_blank",children:e.jsx(N,{src:(u=(d=s.album)==null?void 0:d.images[0])==null?void 0:u.url,boxSize:{base:"40px",md:"60px"},fallbackSrc:"https://via.placeholder.com/150"})})})]},`recently played ${s.name,t}`)})})]})})}),le=()=>{const a=Q(),{user:s,userMutate:t,loggedOut:r,recentlyPlayedSongs:n,recentlyPlayedSongsIsLoading:l,topItems:o,topItemsLoading:h,popularityNumbers:m}=U(),[d,u]=k.useState(!0),[x,b]=k.useState(!0);k.useEffect(()=>{r&&t(null,!1).then(()=>a("/"))},[r,t]);const S=()=>{u(!d)},y=()=>{b(!x)};return e.jsx(e.Fragment,{children:e.jsxs(V,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[e.jsx(v,{children:"Music Tracker"}),s?e.jsxs(e.Fragment,{children:[e.jsx(v,{children:s.display_name}),e.jsxs("p",{children:["Email: ",s.email]}),e.jsxs("p",{children:["Country: ",s.country]}),e.jsxs("p",{children:["Product: ",s.product]}),e.jsxs("p",{children:["Type: ",s.type]}),e.jsxs("p",{children:["Followers: ",s.followers.total]}),e.jsx("a",{href:s.external_urls.spotify,target:"blank",children:"Open on Spotify"})]}):null,l?null:e.jsxs(e.Fragment,{children:[e.jsx(Z,{title:"Popularity",description:"Popularity of your 50 most recently played tracks. Based on number of listens and how recent they were.",data:m}),e.jsxs(g,{onClick:y,children:[x?"Hide":"Show"," Recently Played"]}),x?e.jsxs(e.Fragment,{children:[e.jsx(v,{children:"Recently Played Tracks"}),e.jsx(ae,{recentlyPlayedSongs:n})]}):null]}),e.jsxs(g,{onClick:S,children:[d?"Hide":"Show"," Top Items"]}),!h&&d?e.jsxs(e.Fragment,{children:[e.jsx(v,{children:"Top Artists And Tracks"}),e.jsxs(E,{templateColumns:"repeat(2, 1fr)",gap:6,p:6,w:"100%",children:[e.jsx(I,{w:"100%",noOfLines:1,children:e.jsx(L,{itemType:"Artists",items:o.artists.items})}),e.jsx(I,{w:"100%",noOfLines:1,children:e.jsx(L,{itemType:"Tracks",items:o.tracks.items})})]})]}):null]})})};export{le as Profile};
